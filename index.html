<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <title>Evolve</title>
    <link rel="stylesheet" href="assets/main.css">
</head>
<body>
    <div id="container">
        <header>
            <h1>Evolve</h1>
            <a href="#about">About</a>
        </header>
        
        <canvas id="world">
            Your browser does not support canvas. Please try again with a different browser.
        </canvas>
        <div id="info">
            <div>
                <strong>FPS:</strong>
                <div id="fps"></div>
            </div>
            
            <div id="creature-info">
                <h2>Info</h2>
                <strong>Generation:</strong>
                <div id="generation"></div>        
                <strong>Age:</strong>
                <div id="age"></div>
                <strong>Current Speed:</strong>
                <div id="current-speed"></div>
                <div id="inheritable-info"></div>
    
                <hr>
                
                <strong>Creature Count</strong>
                <div id="total-creatures"></div>
                <div id="inheritable-average"></div>
            </div>
    
            <div id="about">
                A simulation of basic evolutionary processes using Javascript Canvas. Agents have survival and breeding requirements. On succesful breeding, a clone is produced with each agent property having a chance of mutating by a small amount. This creates an environment in which the more succesful agents can evolve to better suit the environment.
    
                All agent behavior is run through a neural network. Inputs are collected through sensory "organs", outputs are mapped to behavioral organs such as mouths for eating, or tails for locomotion. The neural network can also mutate between generations, allowing the agents to learn behavior to be more succesfull.
                
                The network is automatically extensible, allowing generations to grow or lose organs while maintaining previous generations learned behavior.
                
                The organ system follows a clear OOP approach, allowing easy creation of new mutatable organs with specialised behavior. The genetic algorithm that wraps the system naturally includes additional organ behavior. This makes it very easy to create complex creatures with complex behavior.
                
                All agents follow the same rules, evolved behavior such as predation, and fight/flight is all organic.
            </div>
        </div>        
    </div>    
    
    <script src="gpu.js"></script> <!-- GPU Processing -->
    <script src="view/stats.js"></script> <!-- Stats UI -->
    <script src="helpers/helpers.js"></script> <!-- Helper Functions -->   
    
    <script src="models/environment/Nutrient.js"></script>
    <script src="models/environment/Toxin.js"></script>
    <script src="models/life/Creature.js"></script>
    <script src="models/life/Reproducer.js"></script>
    <script src="models/life/Brain.js"></script>
    <script src="models/life/parts/Part.js"></script>   
    <script src="models/life/parts/motility/Tail.js"></script> 
    <script src="models/life/parts/consumption/Absorber.js"></script> 
    <script src="models/life/parts/consumption/Mouth.js"></script>
    <script src="models/life/parts/sensing/Sensor.js"></script>
    <script src="models/life/parts/sensing/Ear.js"></script>
    <script src="models/life/parts/sensing/Nerves.js"></script>
    <script src="services/life.js"></script>
    <script src="services/environment.js"></script>
    <script src="app.js"></script>
    <script> 
        (function() {App.init();})();        

        // TODO:     
        //  - Check if mutation function is behaving correctly (also cant mutate off of 0 - angle etc)
        //  - Refactor senses and what data they pass to the brain to allow more accurate sensation
        //  - Add energy use to brain and parts
        //  - Give parts quality/size, when they go below a min quality/size remove them
        //  - Balance nutrients
        //  - Balance brain mutations
        //  - change breeding requirements, dont just breed upon eating food, or at least have a cooldown (kind of done)
        //  - Rebuild stats UI
        //  - Add world events
        //  - Add more complex environment
        //  - Add predation
        //  - Add genetic similarity requirements for breeding (if using paired breeding)
        //  - Allow brain evolution

        // PERFORMANCE CONSIDERATIONS
        // - GPU acceleration 
        // - For collision/sense checking, reduce double check 
        //      (if c1 check c2, c2 doesn't need to check c1/if c1 can't sense c2, dont need to check if c2 can sense c1 ----maybe)

    </script>
</body>
</html>